<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Crudefense</title>
<script src="wasm_exec.js"></script>
<script>
const go = new Go();

async function start() {
    const result = await WebAssembly.instantiateStreaming(fetch("main.wasm"), go.importObject);
    go.run(result.instance);
}

// Start only after a user click (works in iframe)
document.addEventListener("DOMContentLoaded", () => {
    const btn = document.createElement("button");
    btn.innerText = "Start Game";
    btn.style.position = "absolute";
    btn.style.left = "50%";
    btn.style.top = "50%";
    btn.style.transform = "translate(-50%, -50%)";
    btn.style.fontSize = "24px";
    document.body.appendChild(btn);
    btn.addEventListener("click", () => {
        btn.remove();
        start();
    });
});
</script>
<style>
body { margin: 0; overflow: hidden; background: #000; }
canvas { display: block; width: 100vw; height: 100vh; }
</style>
</head>
<body>
</body>
</html>
